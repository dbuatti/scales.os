@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==============================================
   Base Theme Definitions (Default: Retro Terminal)
   ============================================== */

@layer base {
  :root {
    /* Retro Terminal / CRT Phosphor Theme (Default) */
    --background: 140 100% 4%;        /* Almost pure black with subtle green tint */
    --foreground: 140 80% 82%;        /* Classic phosphor green (P1 green) */

    --card: 140 100% 6%;
    --card-foreground: 140 80% 82%;

    --popover: 140 100% 6%;
    --popover-foreground: 140 80% 82%;

    /* Primary: Electric Terminal Green (glowing) */
    --primary: 140 100% 65%;           /* Bright phosphor green */
    --primary-foreground: 140 100% 4%; /* Near-black for contrast on buttons */

    /* Secondary: Deep terminal background panels */
    --secondary: 140 80% 8%;
    --secondary-foreground: 140 80% 82%;

    /* Muted: Dimmed text and inactive elements */
    --muted: 140 60% 12%;
    --muted-foreground: 140 50% 45%;

    /* Accent: Used for highlights, hovers, subtle glows */
    --accent: 140 90% 10%;
    --accent-foreground: 140 100% 65%;

    /* Destructive / Alert: Amber-Orange (classic warning color on old terminals) */
    --destructive: 35 90% 65%;         /* Retro amber/orange */
    --destructive-foreground: 140 100% 4%;

    /* New: Warning/In-Progress (Yellow/Amber) */
    --warning: 45 100% 60%;            /* Bright yellow for warnings/progress */
    --warning-foreground: 140 100% 4%;

    /* New: Success/Mastered (Cyan/Aqua) */
    --success: 180 100% 60%;           /* Bright cyan for success/mastery */
    --success-foreground: 140 100% 4%;

    /* Borders & Inputs: Subtle green-tinted edges */
    --border: 140 70% 15%;
    --input: 140 70% 15%;
    --ring: 140 100% 65%;             /* Bright green focus ring */

    --radius: 0.375rem;               /* Slightly sharper for retro feel */

    /* Sidebar (if used in layout) */
    --sidebar-background: 140 100% 4%;
    --sidebar-foreground: 140 80% 82%;
    --sidebar-primary: 140 100% 65%;
    --sidebar-primary-foreground: 140 100% 4%;
    --sidebar-accent: 140 90% 10%;
    --sidebar-accent-foreground: 140 100% 65%;
    --sidebar-border: 140 70% 15%;
    --sidebar-ring: 140 100% 65%;
  }

  /* Modern Light Theme */
  [data-theme="modern-light"] {
    --background: 0 0% 100%;           /* White */
    --foreground: 240 10% 3.9%;        /* Dark grey */

    --card: 0 0% 100%;                 /* White */
    --card-foreground: 240 10% 3.9%;   /* Dark grey */

    --popover: 0 0% 100%;              /* White */
    --popover-foreground: 240 10% 3.9%;/* Dark grey */

    --primary: 210 90% 40%;            /* Medium Blue */
    --primary-foreground: 0 0% 100%;   /* White */

    --secondary: 210 20% 95%;          /* Very light grey-blue */
    --secondary-foreground: 240 10% 3.9%; /* Dark grey */

    --muted: 210 20% 95%;              /* Very light grey-blue */
    --muted-foreground: 210 10% 45%;   /* Medium grey */

    --accent: 210 90% 90%;             /* Very light blue for hover */
    --accent-foreground: 210 90% 40%;  /* Medium Blue */

    --destructive: 0 84.2% 60.2%;      /* Red */
    --destructive-foreground: 0 0% 98%;/* Near white */

    --warning: 40 100% 50%;            /* Orange-yellow */
    --warning-foreground: 240 10% 3.9%;/* Dark grey */

    --success: 142 71% 45%;            /* Green */
    --success-foreground: 0 0% 98%;    /* Near white */

    --border: 210 20% 88%;             /* Light grey-blue border */
    --input: 210 20% 88%;              /* Light grey-blue input */
    --ring: 210 90% 40%;               /* Medium Blue focus ring */

    --radius: 0.5rem;

    --sidebar-background: 0 0% 100%;
    --sidebar-foreground: 240 10% 3.9%;
    --sidebar-primary: 210 90% 40%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 210 90% 90%;
    --sidebar-accent-foreground: 210 90% 40%;
    --sidebar-border: 210 20% 88%;
    --sidebar-ring: 210 90% 40%;
  }

  /* Vibrant Dark Theme */
  [data-theme="vibrant-dark"] {
    --background: 220 15% 10%; /* Deep blue-grey */
    --foreground: 210 50% 95%; /* Off-white */

    --card: 220 15% 12%;
    --card-foreground: 210 50% 95%;

    --popover: 220 15% 12%;
    --popover-foreground: 210 50% 95%;

    --primary: 260 80% 70%; /* Vibrant Purple */
    --primary-foreground: 220 15% 10%;

    --secondary: 220 15% 18%;
    --secondary-foreground: 210 50% 95%;

    --muted: 220 15% 25%;
    --muted-foreground: 210 20% 70%;

    --accent: 260 80% 20%; /* Darker purple accent */
    --accent-foreground: 260 80% 70%;

    --destructive: 0 80% 60%; /* Bright Red */
    --destructive-foreground: 210 50% 95%;

    --warning: 40 100% 60%; /* Bright Orange */
    --warning-foreground: 220 15% 10%;

    --success: 160 80% 50%; /* Bright Teal */
    --success-foreground: 220 15% 10%;

    --border: 220 15% 30%;
    --input: 220 15% 25%;
    --ring: 260 80% 70%;

    --radius: 0.5rem;

    --sidebar-background: 220 15% 10%;
    --sidebar-foreground: 210 50% 95%;
    --sidebar-primary: 260 80% 70%;
    --sidebar-primary-foreground: 220 15% 10%;
    --sidebar-accent: 260 80% 20%;
    --sidebar-accent-foreground: 260 80% 70%;
    --sidebar-border: 220 15% 30%;
    --sidebar-ring: 260 80% 70%;
  }

  /* Dark mode â€” reinforced for full terminal immersion */
  /* This block is now redundant as themes are handled by data-theme attribute */
  /* Keeping it for now, but it will be ignored if data-theme is set */
  .dark {
    --background: 140 100% 4%;
    --foreground: 140 80% 82%;

    --card: 140 100% 6%;
    --card-foreground: 140 80% 82%;

    --popover: 140 100% 6%;
    --popover-foreground: 140 80% 82%;

    --primary: 140 100% 65%;
    --primary-foreground: 140 100% 4%;

    --secondary: 140 80% 8%;
    --secondary-foreground: 140 80% 82%;

    --muted: 140 60% 12%;
    --muted-foreground: 140 50% 45%;

    --accent: 140 90% 10%;
    --accent-foreground: 140 100% 65%;

    --destructive: 35 90% 65%;
    --destructive-foreground: 140 100% 4%;

    /* New: Warning/In-Progress (Yellow/Amber) */
    --warning: 45 100% 60%;
    --warning-foreground: 140 100% 4%;

    /* New: Success/Mastered (Cyan/Aqua) */
    --success: 180 100% 60%;
    --success-foreground: 140 100% 4%;

    --border: 140 70% 15%;
    --input: 140 70% 15%;
    --ring: 140 100% 65%;

    --sidebar-background: 140 100% 4%;
    --sidebar-foreground: 140 80% 82%;
    --sidebar-primary: 140 100% 65%;
    --sidebar-primary-foreground: 140 100% 4%;
    --sidebar-accent: 140 90% 10%;
    --sidebar-accent-foreground: 140 100% 65%;
    --sidebar-border: 140 70% 15%;
    --sidebar-ring: 140 100% 65%;
  }
}

/* ==============================================
   Global Enhancements for CRT / Terminal Feel
   ============================================== */

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-mono;
    background-color: hsl(var(--background));
    /* Optional: Add subtle noise or scanline texture via inline style or external */
  }

  /* Monospace enforcement for that terminal authenticity */
  h1, h2, h3, h4, h5, h6,
  .font-mono {
    font-feature-settings: "liga" 0, "calt" 0; /* Cleaner mono look */
  }

  /* Selection highlight in phosphor green */
  ::selection {
    background-color: hsl(var(--primary) / 0.4);
    color: hsl(140 100% 95%);
  }

  /* Focus rings with glow */
  *:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
    box-shadow: 0 0 0 4px hsl(var(--ring) / 0.3);
  }
}

/* ==============================================
   Utility Classes for Enhanced Retro Effects
   ============================================== */

@layer components {
  /* CRT-style text glow */
  .text-glow {
    text-shadow: 0 0 8px hsl(var(--primary) / 0.8),
                 0 0 16px hsl(var(--primary) / 0.5);
  }

  .text-glow-intense {
    text-shadow: 0 0 12px hsl(var(--primary)),
                 0 0 24px hsl(var(--primary) / 0.7),
                 0 0 40px hsl(var(--primary) / 0.4);
  }

  /* Amber alert glow */
  .text-amber-glow {
    text-shadow: 0 0 10px hsl(var(--destructive) / 0.9);
  }

  /* Subtle inner border for panels */
  .panel-glow {
    box-shadow: 
      inset 0 0 20px hsl(var(--primary) / 0.1),
      0 0 20px hsl(var(--primary) / 0.2);
  }

  /* Blinking cursor effect (for prompts or status) */
  .blink {
    animation: blink 1s steps(2, start) infinite;
  }

  @keyframes blink {
    to {
      visibility: hidden;
    }
  }

  /* Scanline overlay (add to full-screen container if desired) */
  .scanlines::before {
    content: "";
    @apply absolute inset-0 pointer-events-none opacity-10;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      hsl(var(--primary) / 0.03) 2px,
      hsl(var(--primary) / 0.03) 4px
    );
    mix-blend-mode: overlay;
  }

  /* Pulse Glow for active elements */
  @keyframes pulse-glow {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.4); }
  }
  .animate-pulse-glow {
    animation: pulse-glow 2s infinite;
  }
}